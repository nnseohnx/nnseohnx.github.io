<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NNSEOHNX</title>
    <style>
      :root{
        --bg:#000; --fg:#eaeaea; --muted:#9aa0a6; --card:#111; --accent:#7c3aed;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0; background:var(--bg); color:var(--fg); font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, Malgun Gothic, sans-serif;
      }
      a{color:inherit; text-decoration:none}
      .container{max-width:1100px; margin:0 auto; padding:0 16px}

      /* ---------- HERO BASE ---------- */
      .hero{
        position:relative; height:100vh; width:100%;
        overflow:hidden; display:flex; align-items:center; justify-content:center;
        user-select:none; cursor:grab;
      }
      .hero:active{cursor:grabbing}

      /* ---------- VIDEO BACKGROUND ---------- */
      .video-wrapper{
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      .video-wrapper video{
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        filter:drop-shadow(0 10px 40px rgba(0,0,0,.6));
        will-change: transform, opacity, filter;
        transition: filter .18s ease-out;
      }

      /* ---------- PNG CENTER SMALL ---------- */
      .overlay-center{
        position:absolute;
        top:50%;
        left:50%;
        transform:translate(-50%, -50%);
        width:60%;          /* PNG 크기 조절 */
        max-width:800px;
        height:auto;
        object-fit:contain;
        pointer-events:none;
      }

      /* ---------- SCROLL HINT ---------- */
      .scroll-hint{
        position:absolute; bottom:20px; left:50%; transform:translateX(-50%);
        font-size:14px; color:var(--muted); opacity:.85;
        display:flex; gap:8px; align-items:center;
        z-index:10;
      }
      .chevron{
        display:inline-block; width:10px; height:10px;
        border-right:2px solid var(--muted); border-bottom:2px solid var(--muted);
        transform:rotate(45deg); animation:bounce 1.5s infinite;
      }
      @keyframes bounce{
        0%,100%{transform:translateY(0) rotate(45deg)}
        50%{transform:translateY(6px) rotate(45deg)}
      }

      /* ---------- CONTENT SECTIONS ---------- */
      .section{padding:56px 0}
      .section h2{font-size:clamp(20px, 3vw, 28px); margin:0 0 20px; letter-spacing:.4px}
      .section p.muted{margin-top:0; color:var(--muted); font-size:14px}

      /* VIDEO GRID */
      .grid{display:grid; grid-template-columns:repeat(1, minmax(0,1fr)); gap:16px}
      @media(min-width:560px){.grid{grid-template-columns:repeat(2, minmax(0,1fr))}}
      @media(min-width:900px){.grid{grid-template-columns:repeat(3, minmax(0,1fr))}}

      .card{
        background:var(--card); border:1px solid #1f1f1f; border-radius:18px;
        overflow:hidden; transition:transform .2s ease, box-shadow .2s ease;
      }
      .card:hover{
        transform:translateY(-2px);
        box-shadow:0 12px 24px rgba(0,0,0,.35);
      }
      .thumb{aspect-ratio:16/9; width:100%; display:block; background:#0a0a0a; object-fit:cover}
      .meta{padding:12px 14px 16px}
      .title{font-weight:600; font-size:15px; margin:0 0 4px}
      .sub{color:var(--muted); font-size:12px}
      .play-btn{position:absolute; inset:0; display:grid; place-items:center}
      .play-icon{
        width:64px; height:64px; border-radius:50%;
        background:rgba(0,0,0,.55); backdrop-filter:blur(4px);
        display:grid; place-items:center; transition:transform .2s;
      }
      .play-icon svg{width:26px; height:26px; fill:#fff; margin-left:3px}
      .card:hover .play-icon{transform:scale(1.06)}
      .thumb-wrap{position:relative}

      /* MODAL */
      .modal{
        position:fixed; inset:0; display:none; align-items:center; justify-content:center;
        background:rgba(0,0,0,.75); z-index:40; padding:20px;
      }
      .modal.open{display:flex}
      .modal-frame{
        width:min(100%, 960px); aspect-ratio:16/9;
        background:#000; border-radius:14px; overflow:hidden;
        box-shadow:0 20px 60px rgba(0,0,0,.6);
      }
      .modal iframe{width:100%; height:100%; border:0}
      .modal .close{
        position:absolute; top:14px; right:16px;
        background:transparent; border:0;
        color:#fff; font-size:28px; cursor:pointer; line-height:1;
      }

      /* FOOTER */
      footer{padding:32px 0 60px; color:var(--muted); text-align:center}
    </style>
  </head>

  <body>
    <!-- ---------- HERO: VIDEO BACKGROUND + PNG CENTER ---------- -->
    <header class="hero" id="hero">
      <div class="video-wrapper">
        <video 
          src="assets/Main.mp4"
          autoplay
          muted
          loop
          playsinline
        ></video>

        <img 
          src="assets/hello.png"
          alt="overlay"
          class="overlay-center"
        />
      </div>

      <div class="scroll-hint" aria-hidden="true">
        <span class="chevron"></span>
        Please scroll down to continue
      </div>
    </header>

    <!-- ---------- VIDEOS ---------- -->
    <main class="section container" id="videos">
      <h2>YouTube Playlist</h2>
      <p class="muted">자동 생성된 영상 목록에서 원하는 영상을 선택하세요.</p>
      <div class="grid" id="videoGrid" aria-live="polite"></div>
    </main>

    <footer class="container">
      © <span id="year"></span> nnseohnx. All rights reserved
    </footer>

    <!-- ---------- MODAL ---------- -->
    <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="YouTube player">
      <button class="close" id="closeModal" aria-label="닫기">×</button>
      <div class="modal-frame" id="modalFrame"></div>
    </div>

    <script>
      /* ---------- DRAG SCROLL HERO ---------- */
      (function enableDragScroll(){
        const hero = document.getElementById('hero');
        let isDown=false, startY=0, startScroll=0;
        const onDown = (y)=>{isDown=true; startY=y; startScroll=window.scrollY}
        const onMove = (y)=>{ if(!isDown) return; const dy=y - startY; window.scrollTo({top: Math.max(0, startScroll - dy)}); }
        const onUp = ()=>{ isDown=false }

        hero.addEventListener('mousedown', e=>{onDown(e.clientY)});
        window.addEventListener('mousemove', e=>{onMove(e.clientY)});
        window.addEventListener('mouseup', onUp);
        hero.addEventListener('touchstart', e=>{onDown(e.touches[0].clientY)}, {passive:true});
        window.addEventListener('touchmove', e=>{onMove(e.touches[0].clientY)}, {passive:true});
        window.addEventListener('touchend', onUp);
      })();

      /* ---------- PARALLAX + FADE ---------- */
      (function heroScrollEffects(){
        const hero = document.getElementById('hero');
        const vid  = hero.querySelector('video');
        let ticking = false;

        function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }

        function apply(){
          const vh = window.innerHeight || 1;
          const y  = clamp(window.scrollY, 0, vh);
          const p  = y / vh;

          const translateY = -p * 140;
          const opacity    = Math.max(0, 1 - p * 1.1);
          const blur       = (p * 8).toFixed(2);
          const scale      = (1 + p * 0.03).toFixed(3);

          vid.style.transform = `translateY(${translateY}px) scale(${scale})`;
          vid.style.opacity   = opacity.toFixed(3);
          vid.style.filter    = `drop-shadow(0 10px 40px rgba(0,0,0,.6)) blur(${blur}px)`;

          ticking = false;
        }

        function onScroll(){
          if(!ticking){ requestAnimationFrame(apply); ticking = true; }
        }

        window.addEventListener('scroll', onScroll, { passive:true });
        window.addEventListener('resize', onScroll, { passive:true });
        apply();
      })();

      /* ---------- BUILD YOUTUBE GRID ---------- */
      const videoLinks = [
        'https://youtu.be/gPDcwjJ8pLg?si=1wh6G2gpDVRL0QHc',
        'https://youtu.be/5mOVgCte-gU?si=j0iZbBioMo0yIvDx'
      ];

      const grid = document.getElementById('videoGrid');

      function getYouTubeId(url){
        const m = url.match(/(?:youtu\.be\/|v=)([A-Za-z0-9_-]{6,})/);
        return m ? m[1] : null;
      }
      function thumbUrl(id){
        return `https://img.youtube.com/vi/${id}/hqdefault.jpg`;
      }

      async function fetchTitle(url){
        try{
          const r = await fetch(`https://noembed.com/embed?url=${encodeURIComponent(url)}`);
          if(!r.ok) throw new Error();
          const j = await r.json();
          return j.title || url;
        }catch{
          const id = getYouTubeId(url);
          return id ? `YouTube • ${id}` : url;
        }
      }

      async function buildGrid(){
        const items = await Promise.all(videoLinks.map(async (url)=>({
          id: getYouTubeId(url),
          url,
          title: await fetchTitle(url)
        })));

        for(const v of items){
          if(!v.id) continue;

          const card = document.createElement('article');
          card.className = 'card';

          const wrap = document.createElement('div');
          wrap.className = 'thumb-wrap';

          const img = document.createElement('img');
          img.src = thumbUrl(v.id);
          img.alt = v.title;
          img.loading = 'lazy';
          img.className = 'thumb';

          const overlay = document.createElement('a');
          overlay.href = '#';
          overlay.className = 'play-btn';
          overlay.setAttribute('aria-label', `${v.title} 재생`);
          overlay.addEventListener('click', (e)=>{ e.preventDefault(); openModal(v.id); });

          overlay.innerHTML = '<span class="play-icon"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></span>';

          wrap.appendChild(img);
          wrap.appendChild(overlay);

          const meta = document.createElement('div');
          meta.className = 'meta';

          const h3 = document.createElement('h3');
          h3.className = 'title';
          h3.textContent = v.title;

          const sub = document.createElement('div');
          sub.className = 'sub';
          sub.textContent = 'YouTube';

          meta.appendChild(h3);
          meta.appendChild(sub);

          card.appendChild(wrap);
          card.appendChild(meta);
          grid.appendChild(card);
        }
      }

      buildGrid();

      /* ---------- MODAL ---------- */
      const modal = document.getElementById('modal');
      const frame = document.getElementById('modalFrame');
      const closeBtn = document.getElementById('closeModal');

      function openModal(id){
        modal.classList.add('open');
        frame.innerHTML = `<iframe src="https://www.youtube.com/embed/${id}?autoplay=1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
        document.addEventListener('keydown', onEsc);
      }
      function closeModal(){
        frame.innerHTML = '';
        modal.classList.remove('open');
        document.removeEventListener('keydown', onEsc);
      }
      function onEsc(e){ if(e.key === 'Escape') closeModal(); }

      modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });
      closeBtn.addEventListener('click', closeModal);

      /* ---------- FOOTER YEAR ---------- */
      document.getElementById('year').textContent = new Date().getFullYear();
    </script>
  </body>
</html>
